(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[455],{1007:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9946).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},1096:(e,t,r)=>{"use strict";r.d(t,{default:()=>v});var s=r(5155),a=r(2115),n=r(7168),i=r(8482),c=r(8145),d=r(5339),o=r(3904),l=r(9946);let u=(0,l.A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var x=r(1007);let m=(0,l.A)("smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);var g=r(5168);function v(){let[e,t]=(0,a.useState)([]),[r,l]=(0,a.useState)(!0),[v,h]=(0,a.useState)(!1),f=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e?h(!0):l(!0);try{let e=(0,g.U)(),{data:r,error:s}=await e.rpc("admin_actionlog_recent",{limit_count:100});s?(console.error("Error fetching activities:",s),t([])):t(r||[])}catch(e){console.error("Error fetching activities:",e),t([])}finally{l(!1),h(!1)}};return((0,a.useEffect)(()=>{f()},[]),r)?(0,s.jsx)("div",{className:"space-y-3",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,s.jsx)("div",{className:"bg-gray-100 animate-pulse h-16 rounded-lg"},t))}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Showing ",e.length," recent activities"]}),(0,s.jsxs)(n.$,{variant:"outline",size:"sm",onClick:()=>{f(!0)},disabled:v,className:"h-8",children:[(0,s.jsx)(o.A,{className:"h-3 w-3 mr-1 ".concat(v?"animate-spin":"")}),"Refresh"]})]}),0===e.length?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)(u,{className:"mx-auto h-8 w-8 text-gray-400 mb-2"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"No recent activity found"})]}):(0,s.jsx)("div",{className:"space-y-2 max-h-[600px] overflow-y-auto",children:e.map(e=>(0,s.jsx)(i.Zp,{className:"hover:shadow-sm transition-shadow",children:(0,s.jsx)(i.Wu,{className:"p-3",children:(0,s.jsx)("div",{className:"flex items-start justify-between",children:(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsx)(c.E,{className:"text-xs ".concat((e=>{switch(e.toLowerCase()){case"scan":return"bg-blue-100 text-blue-800 border-blue-200";case"search":return"bg-green-100 text-green-800 border-green-200";case"lookup":return"bg-purple-100 text-purple-800 border-purple-200";case"classify":return"bg-orange-100 text-orange-800 border-orange-200";case"error":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}})(e.type)),variant:"outline",children:e.type}),(0,s.jsxs)("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[(0,s.jsx)(u,{className:"h-3 w-3"}),(e=>{let t=new Date(e),r=Math.floor((new Date().getTime()-t.getTime())/6e4);return r<1?"Just now":r<60?"".concat(r,"m ago"):r<1440?"".concat(Math.floor(r/60),"h ago"):t.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})(e.created_at)]}),(e=>{if(!e)return null;let t=e.toLowerCase();return t.includes("error")||t.includes("failed")?(0,s.jsx)(d.A,{className:"h-3 w-3 text-red-500"}):null})(e.result)]}),(0,s.jsx)("div",{className:"text-sm font-medium mb-1",children:e.input||"No input provided"}),e.result&&(0,s.jsxs)("div",{className:"text-xs text-muted-foreground mb-2",children:["Result: ",e.result]}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[e.userid&&(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(x.A,{className:"h-3 w-3"}),e.userid.substring(0,8),"..."]}),e.deviceid&&(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(m,{className:"h-3 w-3"}),e.deviceid.substring(0,8),"..."]}),e.metadata&&Object.keys(e.metadata).length>0&&(0,s.jsxs)("span",{className:"text-blue-600",children:[Object.keys(e.metadata).length," metadata fields"]})]})]})})})},e.id))})]})}},3999:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var s=r(2596),a=r(9688);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,s.$)(t))}},4623:(e,t,r)=>{Promise.resolve().then(r.bind(r,1096))},5168:(e,t,r)=>{"use strict";r.d(t,{U:()=>a});var s=r(3865);function a(){return(0,s.createBrowserClient)("https://wlatnzsnrlwykkriovwd.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndsYXRuenNucmx3eWtrcmlvdndkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIzMjY5NTcsImV4cCI6MjA2NzkwMjk1N30.dJaysEtKuM4td0LnZUtcVaBk9VWW0TBvvkDRqLpzh4s")}},5339:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9946).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},7168:(e,t,r)=>{"use strict";r.d(t,{$:()=>d});var s=r(5155);r(2115);var a=r(9708),n=r(2085),i=r(3999);let c=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function d(e){let{className:t,variant:r,size:n,asChild:d=!1,...o}=e,l=d?a.DX:"button";return(0,s.jsx)(l,{"data-slot":"button",className:(0,i.cn)(c({variant:r,size:n,className:t})),...o})}},8145:(e,t,r)=>{"use strict";r.d(t,{E:()=>c});var s=r(5155);r(2115);var a=r(2085),n=r(3999);let i=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function c(e){let{className:t,variant:r,...a}=e;return(0,s.jsx)("div",{className:(0,n.cn)(i({variant:r}),t),...a})}},8482:(e,t,r)=>{"use strict";r.d(t,{BT:()=>d,Wu:()=>o,ZB:()=>c,Zp:()=>n,aR:()=>i});var s=r(5155);r(2115);var a=r(3999);function n(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...r})}function i(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...r})}function c(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",t),...r})}function d(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",t),...r})}function o(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",t),...r})}}},e=>{e.O(0,[836,320,441,964,358],()=>e(e.s=4623)),_N_E=e.O()}]);