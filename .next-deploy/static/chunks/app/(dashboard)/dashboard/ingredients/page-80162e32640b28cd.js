(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[982],{2714:(e,s,a)=>{"use strict";a.d(s,{J:()=>i});var t=a(5155);a(2115);var r=a(968),n=a(3999);function i(e){let{className:s,...a}=e;return(0,t.jsx)(r.b,{"data-slot":"label",className:(0,n.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",s),...a})}},3605:(e,s,a)=>{"use strict";a.d(s,{default:()=>_});var t=a(5155),r=a(2115),n=a(9852),i=a(7168),l=a(8482),c=a(8145),d=a(7924),o=a(7108),u=a(9074),m=a(6287),x=a(9946);let h=(0,x.A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var p=a(5168),g=a(9840),v=a(2714),f=a(4416),j=a(1154),y=a(4229);function b(e){let{ingredient:s,open:a,onClose:l,onSuccess:d}=e,[o,u]=(0,r.useState)({class:s.class||"",primary_class:s.primary_class||""}),[m,x]=(0,r.useState)(!1),[h,b]=(0,r.useState)(null),N=async e=>{e.preventDefault(),x(!0),b(null);try{let e=(0,p.U)(),{error:a}=await e.rpc("admin_update_ingredient",{ingredient_title:s.title,new_class:""===o.class?null:o.class,new_primary_class:""===o.primary_class?null:o.primary_class});a?b(a.message):d()}catch(e){b(e instanceof Error?e.message:"Update failed")}finally{x(!1)}};return(0,t.jsx)(g.lG,{open:a,onOpenChange:l,children:(0,t.jsxs)(g.Cf,{className:"sm:max-w-md",children:[(0,t.jsxs)(g.c7,{children:[(0,t.jsx)(g.L3,{children:"Edit Ingredient"}),(0,t.jsx)(g.rr,{children:"Update the classification details for this ingredient"})]}),(0,t.jsxs)("form",{onSubmit:N,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(v.J,{children:"Ingredient Title"}),(0,t.jsx)(n.p,{value:s.title,disabled:!0,className:"bg-gray-50"}),(0,t.jsxs)(c.E,{variant:"outline",className:"text-xs",children:["Used in ",s.productcount," products"]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(v.J,{htmlFor:"class",children:"Class"}),(0,t.jsxs)("select",{id:"class",value:o.class,onChange:e=>u({...o,class:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:[(0,t.jsx)("option",{value:"",children:"(No classification)"}),(0,t.jsx)("option",{value:"ignore",children:"ignore"}),(0,t.jsx)("option",{value:"may be non-vegetarian",children:"may be non-vegetarian"}),(0,t.jsx)("option",{value:"non-vegetarian",children:"non-vegetarian"}),(0,t.jsx)("option",{value:"typically vegan",children:"typically vegan"}),(0,t.jsx)("option",{value:"typically vegetarian",children:"typically vegetarian"}),(0,t.jsx)("option",{value:"vegan",children:"vegan"}),(0,t.jsx)("option",{value:"vegetarian",children:"vegetarian"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(v.J,{htmlFor:"primary_class",children:"Primary Class"}),(0,t.jsxs)("select",{id:"primary_class",value:o.primary_class,onChange:e=>u({...o,primary_class:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:[(0,t.jsx)("option",{value:"",children:"(No primary class)"}),(0,t.jsx)("option",{value:"non-vegetarian",children:"non-vegetarian"}),(0,t.jsx)("option",{value:"undetermined",children:"undetermined"}),(0,t.jsx)("option",{value:"vegan",children:"vegan"}),(0,t.jsx)("option",{value:"vegetarian",children:"vegetarian"})]})]}),h&&(0,t.jsx)("div",{className:"bg-destructive/10 border border-destructive/20 rounded-md p-3",children:(0,t.jsx)("p",{className:"text-sm text-destructive",children:h})}),(0,t.jsxs)(g.Es,{className:"gap-2",children:[(0,t.jsxs)(i.$,{type:"button",variant:"outline",onClick:l,disabled:m,children:[(0,t.jsx)(f.A,{className:"h-4 w-4 mr-2"}),"Cancel"]}),(0,t.jsx)(i.$,{type:"submit",disabled:m||!(()=>{let e=""===o.class?null:o.class,a=""===o.primary_class?null:o.primary_class;return e!==s.class||a!==s.primary_class})(),className:"min-w-[100px]",children:m?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y.A,{className:"h-4 w-4 mr-2"}),"Save Changes"]})})]})]})]})})}let N=(0,x.A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);function w(e){let{ingredient:s,open:a,onClose:n,onSuccess:l}=e,[d,o]=(0,r.useState)(!1),[u,m]=(0,r.useState)(null),x=async()=>{o(!0),m(null);try{let e=(0,p.U)(),{error:a}=await e.rpc("admin_delete_ingredient",{ingredient_title:s.title});a?m(a.message):l()}catch(e){m(e instanceof Error?e.message:"Delete failed")}finally{o(!1)}};return(0,t.jsx)(g.lG,{open:a,onOpenChange:n,children:(0,t.jsxs)(g.Cf,{className:"sm:max-w-md",children:[(0,t.jsxs)(g.c7,{children:[(0,t.jsxs)(g.L3,{className:"flex items-center gap-2 text-destructive",children:[(0,t.jsx)(N,{className:"h-5 w-5"}),"Delete Ingredient"]}),(0,t.jsx)(g.rr,{children:"This action cannot be undone. This will permanently delete the ingredient from the database."})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[(0,t.jsx)("div",{children:(0,t.jsx)("h3",{className:"font-semibold text-lg",children:s.title})}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[s.class&&(0,t.jsxs)(c.E,{variant:"secondary",className:"text-xs",children:["Class: ",s.class]}),s.primary_class&&(0,t.jsxs)(c.E,{variant:"outline",className:"text-xs",children:["Primary: ",s.primary_class]}),(0,t.jsxs)(c.E,{variant:"destructive",className:"text-xs",children:["Used in ",s.productcount," products"]})]})]}),s.productcount>0&&(0,t.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-3",children:(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsx)(N,{className:"h-4 w-4 text-yellow-600 mt-0.5"}),(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("p",{className:"font-medium text-yellow-800",children:"Warning:"}),(0,t.jsxs)("p",{className:"text-yellow-700",children:["This ingredient is currently used in ",s.productcount," products. Deleting it may affect product classifications."]})]})]})}),u&&(0,t.jsx)("div",{className:"bg-destructive/10 border border-destructive/20 rounded-md p-3",children:(0,t.jsx)("p",{className:"text-sm text-destructive",children:u})})]}),(0,t.jsxs)(g.Es,{className:"gap-2",children:[(0,t.jsxs)(i.$,{type:"button",variant:"outline",onClick:n,disabled:d,children:[(0,t.jsx)(f.A,{className:"h-4 w-4 mr-2"}),"Cancel"]}),(0,t.jsx)(i.$,{type:"button",variant:"destructive",onClick:x,disabled:d,className:"min-w-[100px]",children:d?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h,{className:"h-4 w-4 mr-2"}),"Delete Ingredient"]})})]})]})})}function _(){let[e,s]=(0,r.useState)(""),[a,x]=(0,r.useState)([]),[g,v]=(0,r.useState)(!1),[f,j]=(0,r.useState)(null),[y,N]=(0,r.useState)(null),[_,k]=(0,r.useState)(!1),C=async e=>{if(!e.trim()){x([]),k(!1);return}v(!0),k(!0);try{let s=(0,p.U)(),{data:a,error:t}=await s.rpc("admin_search_ingredients",{query:e,limit_count:50});t?(console.error("Search error:",t),x([])):x(a||[])}catch(e){console.error("Search failed:",e),x([])}finally{v(!1)}};(0,r.useEffect)(()=>{let s=setTimeout(()=>{C(e)},300);return()=>clearTimeout(s)},[e]);let S=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(d.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,t.jsx)(n.p,{placeholder:"Search ingredients by title...",value:e,onChange:e=>s(e.target.value),className:"pl-9"})]}),g&&(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("div",{className:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-primary"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"Searching ingredients..."})]}),_&&!g&&0===a.length&&(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(d.A,{className:"mx-auto h-8 w-8 text-gray-400 mb-2"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e?'No ingredients found for "'.concat(e,'"'):"Enter a search term to find ingredients"})]}),a.length>0&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Found ",a.length," ingredient",1!==a.length?"s":""]}),a.map(e=>(0,t.jsx)(l.Zp,{className:"hover:shadow-md transition-shadow",children:(0,t.jsx)(l.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"font-semibold text-lg mb-2",children:e.title}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2 mb-3",children:[e.class&&(0,t.jsxs)(c.E,{variant:"secondary",className:"text-xs",children:["Class: ",e.class]}),e.primary_class&&(0,t.jsxs)(c.E,{variant:"outline",className:"text-xs",children:["Primary: ",e.primary_class]}),(0,t.jsxs)(c.E,{variant:"outline",className:"text-xs flex items-center gap-1",children:[(0,t.jsx)(o.A,{className:"h-3 w-3"}),e.productcount," products"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(u.A,{className:"h-3 w-3"}),"Created: ",S(e.created)]}),(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(u.A,{className:"h-3 w-3"}),"Updated: ",S(e.lastupdated)]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 ml-4",children:[(0,t.jsx)(i.$,{size:"sm",variant:"outline",onClick:()=>j(e),className:"h-8 w-8 p-0",children:(0,t.jsx)(m.A,{className:"h-3 w-3"})}),(0,t.jsx)(i.$,{size:"sm",variant:"outline",onClick:()=>N(e),className:"h-8 w-8 p-0 text-destructive hover:text-destructive",children:(0,t.jsx)(h,{className:"h-3 w-3"})})]})]})})},e.title))]}),f&&(0,t.jsx)(b,{ingredient:f,open:!!f,onClose:()=>j(null),onSuccess:()=>{C(e),j(null)}}),y&&(0,t.jsx)(w,{ingredient:y,open:!!y,onClose:()=>N(null),onSuccess:()=>{C(e),N(null)}})]})}},3999:(e,s,a)=>{"use strict";a.d(s,{cn:()=>n});var t=a(2596),r=a(9688);function n(){for(var e=arguments.length,s=Array(e),a=0;a<e;a++)s[a]=arguments[a];return(0,r.QP)((0,t.$)(s))}},5168:(e,s,a)=>{"use strict";a.d(s,{U:()=>r});var t=a(3865);function r(){return(0,t.createBrowserClient)("https://wlatnzsnrlwykkriovwd.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndsYXRuenNucmx3eWtrcmlvdndkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIzMjY5NTcsImV4cCI6MjA2NzkwMjk1N30.dJaysEtKuM4td0LnZUtcVaBk9VWW0TBvvkDRqLpzh4s")}},5207:(e,s,a)=>{"use strict";a.d(s,{default:()=>m});var t=a(5155),r=a(2115),n=a(7168),i=a(9852),l=a(2714),c=a(646),d=a(1154);let o=(0,a(9946).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var u=a(5168);function m(){let[e,s]=(0,r.useState)({title:"",class:"",primary_class:""}),[a,m]=(0,r.useState)(!1),[x,h]=(0,r.useState)(null),[p,g]=(0,r.useState)(!1),v=async a=>{if(a.preventDefault(),!e.title.trim())return void h("Ingredient title is required");m(!0),h(null),g(!1);try{let a=(0,u.U)(),{error:t}=await a.rpc("admin_create_ingredient",{ingredient_title:e.title.trim(),ingredient_class:""===e.class.trim()?null:e.class.trim(),ingredient_primary_class:""===e.primary_class.trim()?null:e.primary_class.trim()});t?h(t.message):(g(!0),s({title:"",class:"",primary_class:""}),setTimeout(()=>g(!1),3e3))}catch(e){h(e instanceof Error?e.message:"Creation failed")}finally{m(!1)}};return(0,t.jsxs)("form",{onSubmit:v,className:"space-y-4",children:[p&&(0,t.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-md p-3",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 text-green-800",children:[(0,t.jsx)(c.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"Ingredient created successfully!"})]})}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(l.J,{htmlFor:"title",children:["Ingredient Title ",(0,t.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,t.jsx)(i.p,{id:"title",value:e.title,onChange:a=>s({...e,title:a.target.value}),placeholder:"e.g., Organic Cane Sugar",disabled:a,required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(l.J,{htmlFor:"add-class",children:"Class"}),(0,t.jsxs)("select",{id:"add-class",value:e.class,onChange:a=>s({...e,class:a.target.value}),disabled:a,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:[(0,t.jsx)("option",{value:"",children:"(No classification)"}),(0,t.jsx)("option",{value:"ignore",children:"ignore"}),(0,t.jsx)("option",{value:"may be non-vegetarian",children:"may be non-vegetarian"}),(0,t.jsx)("option",{value:"non-vegetarian",children:"non-vegetarian"}),(0,t.jsx)("option",{value:"typically vegan",children:"typically vegan"}),(0,t.jsx)("option",{value:"typically vegetarian",children:"typically vegetarian"}),(0,t.jsx)("option",{value:"vegan",children:"vegan"}),(0,t.jsx)("option",{value:"vegetarian",children:"vegetarian"})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"General dietary classification of the ingredient"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(l.J,{htmlFor:"add-primary-class",children:"Primary Class"}),(0,t.jsxs)("select",{id:"add-primary-class",value:e.primary_class,onChange:a=>s({...e,primary_class:a.target.value}),disabled:a,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:[(0,t.jsx)("option",{value:"",children:"(No primary class)"}),(0,t.jsx)("option",{value:"non-vegetarian",children:"non-vegetarian"}),(0,t.jsx)("option",{value:"undetermined",children:"undetermined"}),(0,t.jsx)("option",{value:"vegan",children:"vegan"}),(0,t.jsx)("option",{value:"vegetarian",children:"vegetarian"})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Primary dietary classification"})]}),x&&(0,t.jsx)("div",{className:"bg-destructive/10 border border-destructive/20 rounded-md p-3",children:(0,t.jsx)("p",{className:"text-sm text-destructive",children:x})}),(0,t.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,t.jsx)(n.$,{type:"submit",disabled:a||!e.title.trim(),className:"flex-1",children:a?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Creating..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o,{className:"h-4 w-4 mr-2"}),"Add Ingredient"]})}),(e.title||e.class||e.primary_class)&&!a&&(0,t.jsx)(n.$,{type:"button",variant:"outline",onClick:()=>{s({title:"",class:"",primary_class:""}),h(null),g(!1)},children:"Clear"})]})]})}},7108:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},7168:(e,s,a)=>{"use strict";a.d(s,{$:()=>c});var t=a(5155);a(2115);var r=a(9708),n=a(2085),i=a(3999);let l=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function c(e){let{className:s,variant:a,size:n,asChild:c=!1,...d}=e,o=c?r.DX:"button";return(0,t.jsx)(o,{"data-slot":"button",className:(0,i.cn)(l({variant:a,size:n,className:s})),...d})}},7968:(e,s,a)=>{Promise.resolve().then(a.bind(a,5207)),Promise.resolve().then(a.bind(a,3605)),Promise.resolve().then(a.bind(a,9455))},8145:(e,s,a)=>{"use strict";a.d(s,{E:()=>l});var t=a(5155);a(2115);var r=a(2085),n=a(3999);let i=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:s,variant:a,...r}=e;return(0,t.jsx)("div",{className:(0,n.cn)(i({variant:a}),s),...r})}},8482:(e,s,a)=>{"use strict";a.d(s,{BT:()=>c,Wu:()=>d,ZB:()=>l,Zp:()=>n,aR:()=>i});var t=a(5155);a(2115);var r=a(3999);function n(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",s),...a})}function i(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",s),...a})}function l(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",s),...a})}function c(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",s),...a})}function d(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",s),...a})}},9455:(e,s,a)=>{"use strict";a.d(s,{default:()=>h});var t=a(5155),r=a(2115),n=a(8482),i=a(8145),l=a(7168),c=a(9946);let d=(0,c.A)("chart-pie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);var o=a(3904);let u=(0,c.A)("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),m=(0,c.A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);var x=a(5168);function h(){let[e,s]=(0,r.useState)(null),[a,c]=(0,r.useState)(!0),[h,p]=(0,r.useState)(null),g=async()=>{c(!0),p(null);try{let e=(0,x.U)(),{data:a,error:t}=await e.rpc("admin_get_ingredient_stats");t?p(t.message):s(a)}catch(e){p(e instanceof Error?e.message:"Failed to load stats")}finally{c(!1)}};if((0,r.useEffect)(()=>{g()},[]),a)return(0,t.jsxs)(n.Zp,{children:[(0,t.jsx)(n.aR,{children:(0,t.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(d,{className:"h-5 w-5"}),"Ingredient Statistics"]})}),(0,t.jsx)(n.Wu,{children:(0,t.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"}),(0,t.jsx)("span",{className:"ml-2 text-sm text-muted-foreground",children:"Loading statistics..."})]})})]});if(h||!e)return(0,t.jsxs)(n.Zp,{children:[(0,t.jsx)(n.aR,{children:(0,t.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(d,{className:"h-5 w-5"}),"Ingredient Statistics"]})}),(0,t.jsx)(n.Wu,{children:(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("p",{className:"text-sm text-destructive mb-4",children:h||"Failed to load statistics"}),(0,t.jsxs)(l.$,{onClick:g,size:"sm",variant:"outline",children:[(0,t.jsx)(o.A,{className:"h-4 w-4 mr-2"}),"Retry"]})]})})]});let v=Math.round(e.with_classification/e.total_ingredients*100);return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(n.Zp,{children:[(0,t.jsx)(n.aR,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(d,{className:"h-5 w-5"}),"Ingredient Statistics"]}),(0,t.jsxs)(l.$,{onClick:g,size:"sm",variant:"outline",children:[(0,t.jsx)(o.A,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})}),(0,t.jsx)(n.Wu,{children:(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-primary",children:e.total_ingredients.toLocaleString()}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Total Ingredients"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-green-600",children:e.with_classification.toLocaleString()}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Classified"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:e.without_classification.toLocaleString()}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Unclassified"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:[v,"%"]}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Classification Rate"})]})]})})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,t.jsxs)(n.Zp,{children:[(0,t.jsx)(n.aR,{children:(0,t.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(u,{className:"h-5 w-5"}),"Class Distribution"]})}),(0,t.jsx)(n.Wu,{children:(0,t.jsx)("div",{className:"space-y-3",children:e.class_distribution.length>0?e.class_distribution.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)(i.E,{variant:"secondary",className:"text-xs",children:e.class||"Unclassified"})}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)("span",{className:"font-medium",children:e.count.toLocaleString()}),(0,t.jsxs)("span",{className:"text-muted-foreground",children:["(",Math.round(e.percentage),"%)"]})]})]},s)):(0,t.jsx)("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No class data available"})})})]}),(0,t.jsxs)(n.Zp,{children:[(0,t.jsx)(n.aR,{children:(0,t.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(m,{className:"h-5 w-5"}),"Primary Class Distribution"]})}),(0,t.jsx)(n.Wu,{children:(0,t.jsxs)("div",{className:"space-y-3",children:[e.primary_class_distribution.length>0?e.primary_class_distribution.slice(0,10).map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)(i.E,{variant:"outline",className:"text-xs",children:e.class||"Unclassified"})}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)("span",{className:"font-medium",children:e.count.toLocaleString()}),(0,t.jsxs)("span",{className:"text-muted-foreground",children:["(",Math.round(e.percentage),"%)"]})]})]},s)):(0,t.jsx)("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No primary class data available"}),e.primary_class_distribution.length>10&&(0,t.jsxs)("div",{className:"text-xs text-muted-foreground text-center pt-2 border-t",children:["Showing top 10 of ",e.primary_class_distribution.length," primary classes"]})]})})]})]})]})}},9840:(e,s,a)=>{"use strict";a.d(s,{Cf:()=>o,Es:()=>m,L3:()=>x,c7:()=>u,lG:()=>l,rr:()=>h});var t=a(5155);a(2115);var r=a(4036),n=a(4416),i=a(3999);function l(e){let{...s}=e;return(0,t.jsx)(r.bL,{"data-slot":"dialog",...s})}function c(e){let{...s}=e;return(0,t.jsx)(r.ZL,{"data-slot":"dialog-portal",...s})}function d(e){let{className:s,...a}=e;return(0,t.jsx)(r.hJ,{"data-slot":"dialog-overlay",className:(0,i.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",s),...a})}function o(e){let{className:s,children:a,showCloseButton:l=!0,...o}=e;return(0,t.jsxs)(c,{"data-slot":"dialog-portal",children:[(0,t.jsx)(d,{}),(0,t.jsxs)(r.UC,{"data-slot":"dialog-content",className:(0,i.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",s),...o,children:[a,l&&(0,t.jsxs)(r.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,t.jsx)(n.A,{}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function u(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"dialog-header",className:(0,i.cn)("flex flex-col gap-2 text-center sm:text-left",s),...a})}function m(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"dialog-footer",className:(0,i.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",s),...a})}function x(e){let{className:s,...a}=e;return(0,t.jsx)(r.hE,{"data-slot":"dialog-title",className:(0,i.cn)("text-lg leading-none font-semibold",s),...a})}function h(e){let{className:s,...a}=e;return(0,t.jsx)(r.VY,{"data-slot":"dialog-description",className:(0,i.cn)("text-muted-foreground text-sm",s),...a})}},9852:(e,s,a)=>{"use strict";a.d(s,{p:()=>n});var t=a(5155);a(2115);var r=a(3999);function n(e){let{className:s,type:a,...n}=e;return(0,t.jsx)("input",{type:a,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),...n})}}},e=>{e.O(0,[836,320,736,441,964,358],()=>e(e.s=7968)),_N_E=e.O()}]);